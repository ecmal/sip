{
  "version": 3,
  "file": "events.js",
  "sourceRoot": "/Users/Sergey/Work/GH/ecmal/sip/src",
  "sources": [
    "events.ts"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "const EVENTS:symbol = Symbol('listener');\nconst ORIGINAL:symbol = Symbol('listener');\n\nexport interface EventEmitter {\n    on(event:string, listener:Function): Emitter;\n    once(event:string, listener:Function): Emitter;\n    off(event?:string, listener?:Function): Emitter;\n    listeners(event?:string): Function[];\n    emit(event:string, ...args:any[]): void;\n}\n\nexport class Emitter implements EventEmitter {\n    public static on<T>(target:T,event:string,handler:Function,once:boolean=false):T{\n        var listener = (...args)=>{\n            handler(...args);\n            if(once){\n                Emitter.off(target,event,handler)\n            }\n        };\n\n        listener[ORIGINAL] = handler;\n\n        var events = target[EVENTS];\n        if(!events){\n            events = target[EVENTS] = {};\n        }\n        var listeners:Function|Function[] = events[event];\n        if(!listeners){\n            events[event] = listener;\n        }else\n        if(typeof listeners=='function'){\n            events[event] = [<Function>listeners,listener];\n        }else{\n            (<Function[]>listeners).push(listener);\n        }\n        return target;\n    }\n    public static off<T>(target:T,event:string,handler:Function):T{\n        var events = target[EVENTS];\n        if(events){\n            if(!handler){\n                delete  events[event];\n                return;\n            }\n            var listeners:Function|Function[] = events[event];\n            if(typeof listeners=='function'){\n                if((handler[ORIGINAL]||handler)===(listeners[ORIGINAL]||listeners)){\n                    delete events[event];\n                }\n            } else\n            if(listeners){\n                var index=-1;\n                for(var i=0;i<listeners.length;i++){\n                    if((handler[ORIGINAL]||handler)===(listeners[i][ORIGINAL]||listeners[i])){\n                        index=i;\n                        break;\n                    }\n                }\n                if(index>=0){\n                    (<Function[]>listeners).splice(i,1);\n                }\n                if(listeners.length==1){\n                    listeners = listeners[0];\n                }else\n                if(listeners.length==0){\n                    delete events[event];\n                }\n            }\n            return target;\n        }\n    }\n    public static listeners(target:any,event:string):Function[]{\n        var events = target[EVENTS];\n        if(events){\n            var listeners = events[event];\n            if(typeof listeners=='function'){\n                return [listeners]\n            } else\n            if(listeners){\n                var result:Function[] = [];\n                for(var i=0;i<listeners.length;i++){\n                    result.push(listeners[i]);\n                }\n                return result;\n            }\n        }\n    }\n    public static emit(target:any,event:string,...args:any[]):void{\n        //setTimeout(()=> {\n        var listeners = Emitter.listeners(target,event);\n        if(listeners && listeners.length){\n            for (var i = 0; i < listeners.length; i++) {\n                listeners[i](...args);\n            }\n        }\n        //},0);\n    }\n    on(event:string, listener:Function): Emitter {\n        return Emitter.on(this,event,listener);\n    }\n    once(event:string, listener:Function): Emitter{\n        return Emitter.on(this,event,listener,true);\n    }\n    off(event?:string, listener?:Function): Emitter{\n        return Emitter.off(this,event,listener);\n    }\n    listeners(event?:string): Function[]{\n        return Emitter.listeners(this,event);\n    }\n    emit(event:string, ...args:any[]): void {\n        return Emitter.emit(this, event, ...args);\n    }\n}"
  ]
}