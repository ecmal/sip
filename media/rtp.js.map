{
  "version": 3,
  "file": "rtp.js",
  "sourceRoot": "/Users/Sergey/Work/GH/ecmal/sip/src",
  "sources": [
    "rtp.ts"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "import {Util} from \"../models/common/utils\";\nimport {Call} from \"../dialogs/invitation/call\";\nimport {Sdp} from \"../models/common/sdp\";\n\n\n\n/**\n *  0               1               2               3\n *  0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |V=2|P|X|  CC   |M|     PT      |       sequence number         |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |                           timestamp                           |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |           synchronization source (SSRC) identifier            |\n * +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n * |            contributing source (CSRC) identifiers             |\n * |                             ....                              |\n * +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |      defined by profile       |           length              |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |                        header extension                       |\n * |                             ....                              |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *                              payload\n *                               ....\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * @author <a href=\"http://bruno.biasedbit.com/\">Bruno de Carvalho</a>\n */\nexport class RtpPacket {\n    private static getPayloadType(buffer:Buffer):number{\n        return buffer[1] & 0x7F;\n    }\n    private static hasExtension(buffer:Buffer):boolean{\n        return !!(buffer[0] >>> 4 & 1);\n    }\n    private static getExtensionType(buffer:Buffer){\n        var count = RtpPacket.getExtensionCount(buffer);\n        if(count>0){\n            return (count+1)*4;\n        }else{\n            return 0;\n        }\n    }\n    private static getExtensionCount(buffer:Buffer){\n        if(RtpPacket.hasExtension(buffer)){\n            return buffer[14] << 8 & buffer[15];\n        }else{\n            return 0;\n        }\n    }\n    private static getExtensionLength(buffer:Buffer){\n        var count = RtpPacket.getExtensionCount(buffer);\n        if(count>0){\n            return (count+1)*4;\n        }else{\n            return 0;\n        }\n    }\n    private static getSourcesCount(buffer:Buffer){\n        return buffer[0] & 0x0F;\n    }\n    private static getSourcesLength(buffer:Buffer){\n        return RtpPacket.getSourcesCount(buffer)*4;\n    }\n    private static getHeaderLength(buffer:Buffer){\n        //fixed length\n        var len = 12;\n        //csrc length\n        len += RtpPacket.getSourcesLength(buffer);\n        //extensional length\n        len += RtpPacket.getExtensionLength(buffer);\n        return len;\n    }\n\n    constructor (options) {\n        this.buffer = null;\n        if(options instanceof Buffer){\n            this.buffer = options;\n            return;\n        }else\n        if(typeof options=='object'){\n            var sCount     = options.sources?options.sources.length:0;\n            var eCount     = options.extension?Math.ceil(options.extension.data.length/4):0;\n            var pLen       = options.data?options.data.length:0;\n            this.buffer    = new Buffer(12-sCount*4+(eCount>0?(eCount*4+4):0)+pLen);\n            this.buffer.fill(0);\n            this.version   = options.version||2;\n            this.padding   = options.padding||false;\n            this.marker    = options.marker||false;\n            this.type      = options.type||0;\n            this.sequence  = options.sequence||0;\n            this.timestamp = options.timestamp||0;\n            this.source    = options.source||Math.round(Math.random()*0xFFFFFFFF);\n            this.sources   = options.sources||[];\n            this.extension = options.extension||null;\n            this.data      = options.data||new Buffer(0);\n        }\n    }\n    public buffer:Buffer;\n    public get version():number{\n        return this.buffer[0] >> 6;\n    }\n    public set version(val:number){\n        this.buffer[0] &= 0x3f;\n        this.buffer[0] |= (val << 6);\n    }\n    public get padding():boolean{\n        return (this.buffer[0] & 0x20)==0x20;\n    }\n    public set padding(val:boolean){\n        if(val){\n            this.buffer[0] |= 0x20;\n        }else{\n            this.buffer[0] &= 0xdf;\n        }\n    }\n    public get marker():boolean{\n        return (this.buffer[1] & 0x80)==0x80;\n    }\n    public set marker(val:boolean){\n        if(val){\n            this.buffer[1] |= 0x80;\n        }else{\n            this.buffer[1] &= 0x7F;\n        }\n    }\n\n    public get sequence():number{\n        return this.buffer.readUInt16BE(2);\n    }\n    public set sequence(val:number){\n        this.buffer.writeInt16BE(val,2);\n    }\n    public get timestamp():number{\n        return (this.buffer.readUInt32BE(4));\n    }\n    public set timestamp(val:number){\n        this.buffer.writeUInt32BE(val,4);\n    }\n\n    //contributing sources\n    public get sources():number[]{\n        var csrcCount = RtpPacket.getSourcesCount(this.buffer);\n        var csrcList = [];\n        for (var i = 0; i < csrcCount; i++) {\n            csrcList.push(this.buffer.readUInt32BE(12 + 4 * i));\n        }\n        return csrcList;\n    }\n    public set sources(val:number[]){\n        var count = val.length;\n        this.buffer[0] &= (count | 0xF0);\n        if(count>0){\n            throw new Error('todo sources')\n        }\n    }\n\n    //synchronization source\n    public get source():number{\n        return this.buffer.readUInt32BE(8);\n    }\n    public set source(val:number){\n        this.buffer.writeInt32BE(val,8);\n    }\n\n    public get type():number{\n        return RtpPacket.getPayloadType(this.buffer);\n    }\n    public set type(val:number){\n        if (val <= 127) {\n            this.buffer[1] &= 0x80;\n            this.buffer[1] |= val;\n        }\n    }\n\n    public get data():Buffer{\n        return this.buffer.slice(RtpPacket.getHeaderLength(this.buffer), this.buffer.length);\n    }\n    public set data(val:Buffer){\n        var hLen = RtpPacket.getHeaderLength(this.buffer);\n        var oLen = this.buffer.length-hLen;\n        var nLen = val.length;\n        if(oLen==nLen){\n            val.copy(this.buffer,hLen,0,nLen);\n        }else {\n            this.buffer = Buffer.concat([this.buffer.slice(0,hLen),val],nLen+oLen);\n        }\n    }\n\n    public get extension():any{\n        var eCount = RtpPacket.getExtensionCount(this.buffer);\n        if(eCount>0){\n            var sCount  = RtpPacket.getSourcesCount(this.buffer);\n            var eOffset = 12+sCount*4;\n            var eType   = this.buffer.readInt16BE(eOffset);\n            var eData   = this.buffer.slice(eOffset+4,eOffset+4+eCount*4);\n            return {\n                count : eCount,\n                type  : eType,\n                data  : eData\n            }\n        }else{\n            return null;\n        }\n    }\n    public set extension(val:any){\n        if(!val){\n            this.buffer[0] &= 0xef;\n        }else{\n            throw new Error('todo sources')\n        }\n    }\n\n\n    public toJSON(){\n        return {\n            version     : this.version,\n            padding     : this.padding,\n            marker      : this.marker,\n            type        : this.type,\n            sequence    : this.sequence,\n            timestamp   : this.timestamp,\n            source      : this.source,\n            sources     : this.sources,\n            extension   : this.extension,\n            data        : this.data\n        }\n    }\n    public copy(){\n        var newBuffer = new Buffer(this.buffer.length);\n        this.buffer.copy(newBuffer);\n        return new RtpPacket(newBuffer);\n    }\n}"
  ]
}